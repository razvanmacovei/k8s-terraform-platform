defaults:
  cluster_name: docker-desktop
  kube_context: docker-desktop
  env: dev
  kubeconfig_path: "~/.kube/config"

namespaces:
  - ingress-nginx
  - cert-manager
  - vault
  - open-webui
  - postgresql
  - n8n
  - monitoring
  - argocd
  - redis
  - x402-system
  - podinfo

ingress_nginx:
  enabled: true
  name: ingress-nginx
  namespace: ingress-nginx
  chart: ingress-nginx
  version: 4.14.3
  repository: https://kubernetes.github.io/ingress-nginx
  values:
    enabled: true
    controller:
      hostNetwork: true
      dnsPolicy: ClusterFirstWithHostNet
      kind: Deployment
      service:
        type: LoadBalancer
      metrics:
        enabled: true
      admissionWebhooks:
        enabled: false
      ingressClassResource:
        name: nginx
      updateStrategy:
        type: RollingUpdate
        rollingUpdate:

cert_manager:
  enabled: true
  name: cert-manager
  namespace: cert-manager
  chart: cert-manager
  version: v1.17.1
  repository: https://charts.jetstack.io
  values:
    crds:
      enabled: true
    ingressShim:
      defaultIssuerName: selfsigned-issuer
      defaultIssuerKind: ClusterIssuer
    extraArgs:
      - --enable-certificate-owner-ref=true
  postInstall:
    - apiVersion: cert-manager.io/v1
      kind: ClusterIssuer
      metadata:
        name: selfsigned-issuer
      spec:
        selfSigned: {}

postgresql:
  enabled: false
  name: postgresql
  namespace: postgresql
  chart: postgresql
  version: 16.6.7
  repository: oci://registry-1.docker.io/bitnamicharts
  values:
    primary:
      persistence:
        enabled: true
        size: 2Gi
        storageClass: ""
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 200m
          memory: 256Mi
    volumePermissions:
      enabled: true

vault:
  enabled: true
  name: vault
  namespace: vault
  chart: vault
  version: 0.30.0
  repository: https://helm.releases.hashicorp.com
  auto_init:
    enabled: true
    key_shares: 1
    key_threshold: 1
  values:
    global:
      enabled: true
    injector:
      enabled: true
    ui:
      enabled: true
    server:
      standalone:
        enabled: true
      ingress:
        enabled: true
        ingressClassName: nginx
        annotations:
          cert-manager.io/cluster-issuer: selfsigned-issuer
        hosts:
          - host: vault.localhost
            paths:
              - /
        tls:
          - secretName: vault-tls
            hosts:
              - vault.localhost
      dataStorage:
        enabled: true
        size: 2Gi
        storageClass: "hostpath"
        accessMode: ReadWriteOnce
      persistentVolumeClaimRetentionPolicy:
        whenDeleted: Retain
        whenScaled: Retain

open_webui:
  enabled: true
  name: open-webui
  namespace: open-webui
  chart: open-webui
  version: 12.5.0
  repository: https://helm.openwebui.com
  values:
    ollama:
      enabled: false
    pipelines:
      enabled: false
    ingress:
      enabled: true
      class: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: selfsigned-issuer
      host: "chat.localhost"
      tls:
        - hosts:
            - "chat.localhost"
          secretName: "open-webui-tls"
    resources:
      limits:
        cpu: 500m
        memory: 2Gi
      requests:
        cpu: 200m
        memory: 512Mi
    persistence:
      enabled: true
      size: 2Gi

n8n:
  enabled: false
  name: n8n
  namespace: n8n
  chart: n8n
  version: 1.16.29
  repository: https://community-charts.github.io/helm-charts
  values:
    main:
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 512m
          memory: 512Mi
    db:
      type: postgresdb
    externalPostgresql:
      host: "postgresql.postgresql.svc.cluster.local"
    ingress:
      enabled: true
      className: nginx
      hosts:
        - host: n8n.localhost
          paths:
            - path: /
              pathType: Prefix
      tls:
        - hosts:
            - n8n.localhost
          secretName: n8n-tls

monitoring:
  enabled: true
  name: kube-prometheus-stack
  namespace: monitoring
  chart: kube-prometheus-stack
  version: 82.2.0
  repository: https://prometheus-community.github.io/helm-charts
  values:
    prometheus:
      prometheusSpec:
        retention: 7d
        resources:
          requests:
            cpu: 200m
            memory: 512Mi
          limits:
            cpu: 1000m
            memory: 2Gi
        storageSpec:
          volumeClaimTemplate:
            spec:
              accessModes: ["ReadWriteOnce"]
              resources:
                requests:
                  storage: 10Gi
    grafana:
      enabled: true
      adminPassword: admin
      ingress:
        enabled: true
        ingressClassName: nginx
        annotations:
          cert-manager.io/cluster-issuer: selfsigned-issuer
        hosts:
          - grafana.localhost
        tls:
          - secretName: grafana-tls
            hosts:
              - grafana.localhost
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 500m
          memory: 512Mi
    alertmanager:
      enabled: true
      alertmanagerSpec:
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 256Mi
    prometheus-node-exporter:
      hostRootFsMount:
        enabled: false
    nodeExporter:
      enabled: true
    kubeStateMetrics:
      enabled: true

argocd:
  enabled: false
  name: argocd
  namespace: argocd
  chart: argo-cd
  version: 9.4.3
  repository: https://argoproj.github.io/argo-helm
  values:
    global:
      domain: argocd.localhost
    server:
      ingress:
        enabled: true
        ingressClassName: nginx
        annotations:
          cert-manager.io/cluster-issuer: selfsigned-issuer
        tls: true
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 500m
          memory: 512Mi
    controller:
      resources:
        requests:
          cpu: 250m
          memory: 256Mi
        limits:
          cpu: 1000m
          memory: 1Gi
    repoServer:
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 500m
          memory: 512Mi
    redis:
      resources:
        requests:
          cpu: 50m
          memory: 64Mi
        limits:
          cpu: 200m
          memory: 256Mi
    configs:
      params:
        server.insecure: true

redis:
  enabled: false
  name: redis
  namespace: redis
  chart: redis
  version: 20.11.3
  repository: oci://registry-1.docker.io/bitnamicharts
  values:
    architecture: standalone
    auth:
      enabled: true
    master:
      persistence:
        enabled: true
        size: 2Gi
      resources:
        requests:
          cpu: 100m
          memory: 128Mi
        limits:
          cpu: 500m
          memory: 512Mi

podinfo:
  enabled: true
  name: podinfo
  namespace: podinfo
  chart: podinfo
  version: 6.10.1
  repository: https://stefanprodan.github.io/podinfo
  values:
    replicaCount: 1
    ingress:
      enabled: true
      className: nginx
      annotations:
        cert-manager.io/cluster-issuer: selfsigned-issuer
      hosts:
        - host: podinfo.localhost
          paths:
            - path: /
              pathType: ImplementationSpecific
      tls:
        - secretName: podinfo-tls
          hosts:
            - podinfo.localhost
    resources:
      requests:
        cpu: 100m
        memory: 32Mi
      limits:
        cpu: 250m
        memory: 128Mi

x402:
  enabled: false
  name: x402-k8s-operator
  namespace: x402-system
  chart: x402-k8s-operator
  version: 0.0.3
  repository: oci://ghcr.io/razvanmacovei/charts
  values:
    replicas: 2
